define(['jquery','Magento_Catalog/js/price-utils','underscore','mage/template'],function($,utils,_,mageTemplate){'use strict';return function(widget){$.widget('mage.priceBox',widget,{reloadPrice:function reDrawPrices(){_.each(this.cache.displayPrices,function(price,priceCode){price.final=_.reduce(price.adjustments,function(memo,amount){return memo+amount;},price.amount);if('finalPrice'===priceCode){$('[id=product-addtocart-button]').attr('data-price',price.final).data('price',price.final);}},this);return this._super();}});return $.mage.priceBox;}});