define(["jquery",],function($){"use strict";let productImages={productClassOnGridView:'.products-grid .product-image-with-hover',productClassOnListView:'.products-list .product-image-with-hover',init:function(){this.productRollImg();this.lazyLoadImage();},productRollImg:function(){$(document).on('mouseenter',this.productClassOnGridView+', '+this.productClassOnListView,function(event){var hoverImage=$(this).data('hover-image');if(hoverImage){$(this).attr('src',hoverImage);}});$(document).on('mouseleave',this.productClassOnGridView+', '+this.productClassOnListView,function(event){if($(this).data('original-image')){$(this).attr('src',$(this).data('original-image'));}});},doLoadProductImg:function($img){if(this.isOnScreen($img)){$img.attr('src',$img.data('original-image'))
$img.addClass('product-image-loaded')
$img.parent().addClass('hide-after-img')}},launchVisibleProductLoad:function(){let self=productImages;$('img.product-image-photo').each(function(){self.doLoadProductImg($(this))})},lazyLoadImage:function(){this.launchVisibleProductLoad()
let self=productImages;$(window).scroll(function(){self.launchVisibleProductLoad()});},isOnScreen:function($obj){var win=$(window);var viewport={top:win.scrollTop(),left:win.scrollLeft()};viewport.right=viewport.left+win.width();viewport.bottom=viewport.top+win.height();var bounds=$obj.offset();bounds.right=bounds.left+$obj.outerWidth();bounds.bottom=bounds.top+$obj.outerHeight();return(!(viewport.right<bounds.left||viewport.left>bounds.right||viewport.bottom<bounds.top||viewport.top>bounds.bottom));}}
return productImages.init();})